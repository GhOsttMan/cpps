const path = require('path');

const rootPath = path.resolve(__dirname, '../../../');
const secretPath = path.join(rootPath, 'secret.js');

const secretModule = {
  secret: process.env.SECRET_TOKEN || require(secretPath).secret,
  dburl: process.env.MONGODB_URI || require(secretPath).dburl,
  mailApi: process.env.SEND_GRID_API || require(secretPath).mailApi,
  recaptcha: {
    site: process.env.RECAPTCHA_SITE || require(secretPath).recaptcha.site,
    secret: process.env.RECAPTCHA_SECRET || require(secretPath).recaptcha.secret
  }
};

module.exports = {
  rootPath,
  grabMiddleware,
  secretModule
};

function grabMiddleware(name) {
  return require(path.join(rootPath, 'middlewares', name));
}
